# 250706 업데이트 내용
## 버그 수정
- 이메일 찾기 - 인증번호 전송 후, 인증번호 입력 창 보이지 않는 현상 디버깅
  - 원인 : css 추가로 js의 코드와 이해관계 어긋남 
  - 노트 : find-email.html 인데 auth-style.css 적용됨 -> refactoring 필요
  - 상세 : 
```javascript
  `find-email.html` 파일 내 JavaScript에서
 
  codeInput.style.display = 'none';
  verifyBtn.style.display = 'none';

  // - 코드를 삭제하여, 인증번호 발송 후 부모 요소의 `display` 속성 변경 시 
  // - 자식 요소들도 함께 보이도록 수정함.
```
- 회원가입 페이지 - 중복 이메일 에러 모달창 닫기 버튼 작동 X
  - 원인 : html 수정 및 css 추가로 js의 코드와 이해관계 어긋남
  - 노트 : register.css -> auth-style.css 적용됨
  - 상세 :
```javascript 
  // - register.html 수정되어 registerValidation.js 가 해당 선택자를 불러오지 못하고 있었음
  const closeButton = document.querySelectors('.close-button');
  const closeButton = document.getElementById('closeErrorBtn');
```
## 기능 추가
- 로그인 - 마지막 로그인 시각 업데이트
  - private LocalDateTime lastLoginAt;
  - auth/service/Userservice.java public void processLoginSuccess() 메서드 - 사용자 정보 조회 후, 로그인 시간 저장 코드 작성  
    1. processLoginSuccess 메서드 내에서 UserEntity user = getUserByEmail(email); 코드를 통해 사용자 정보를 가져온 후,
    2. user.setLastLoginAt(LocalDateTime.now()); 코드를 추가하여 lastLoginAt 필드를 현재 시간으로 설정
    3. 마지막으로 userRepository.save(user);를 호출하여 변경된 사용자 정보를 데이터베이스에 저장 
    4. 사용자가 로그인에 성공할 때마다 lastLoginAt 필드가 업데이트
```java
// ...www\auth\service\UserService.java:
// 3️⃣ 로그인 성공 후 JWT 토큰 발급, 세션 저장, Refresh Token DB 저장 및 쿠키 세팅
public void processLoginSuccess(){
    
  // lastLoginAt 업데이트                                                                                                                                       
    user.setLastLoginAt(LocalDateTime.now());                                                                                                                     
    userRepository.save(user);  
}
```

